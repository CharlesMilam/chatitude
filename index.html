<!DOCTYPE html>
<html>
<head>
    <title>Chatitude</title>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/5.1.1/css/foundation.css">
    <style type="text/css">
      div {
        width: 50%;
        margin: auto;
      }
      ul {
        list-style-type: none;
      }
      .chatsContainer {
        width: 100%;
        margin: auto;
      }
    </style>
    <script type="text/javascript" src="jquery-2.1.1.js"></script>
    <script type="text/javascript" src="handlebars-v2.0.0.js"></script>
    <script type="text/javascript" src="getChats.js"></script>
</head>
<body>
  <div class="appHeader"><h2>Chatitude</h2></div>
  <div class="signupContainer">
    <div class="signupHeader">Chats Signup</div>
    <div class="signupForm">
      <label>User Name:</label>
      <input type="text" placeholder="user name here" id="usernameSignup" />
      <label>Password:</label>
      <input type="password" placeholder="password here" id="passwordSignup">
      <input type="button" value="Signup" id="signupBtn">
    </div>
  </div>
  <div class="spacer"><hr></div>
  <div class="signinContainer">
    <div class="signinHeader">Chats Signup</div>
    <div class="signinForm">
      <label>User Name:</label>
      <input type="text" placeholder="user name here" id="usernameSignin" />
      <label>Password:</label>
      <input type="password" placeholder="password here" id="passwordSignin">
      <input type="button" value="Signin" id="signinBtn">
    </div>
  </div>
  <div class="spacer"><hr></div>
  <div class="chatsContainer">
    <div class="chatsHeader">The Chats</div>
      <div class="chats">
        <ul class="chatsList"></ul>
      </div>
    </div>
  </div>
  <script>
    $("#signupBtn").click(function() {
      console.log("in click")
      $.ajax({
        type: 'POST',
        url: 'http://chat.api.mks.io/signup',
        data: {username: $("#usernameSignup").val(), password: $("#passwordSignup").val()}
        
      }).success(function () {
        console.log("success")
      })
    })
  </script>

  <script>
    $("#signinBtn").click(function() {
      console.log("in click")
      $.ajax({
        type: 'POST',
        url: 'http://chat.api.mks.io/signin',
        data: {username: $("#usernameSignin").val(), password: $("#passwordSignin").val()}
        
      }).success(function (token) {
        console.log("success", token)
        sessionStorage.setItem("apiToken", token["apiToken"])
        console.log("get token", sessionStorage.getItem("apiToken"))
      })
    })
  </script>

  <script id="chats-template" type="text/x-handlebars-template">
    {{#each this}}
      <li class="chats">{{user}} -- Message: {{message}}</li>
    {{/each}}
  </script>
</body>
</html>